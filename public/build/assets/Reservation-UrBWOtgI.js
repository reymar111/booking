import{m as y,P as k,p,c as _,o as n,w as C,a as M,b as e,f as d,g as u,i as b,j as S,F as g,q as c,t as s,H as j,n as x,e as B,C as h}from"./app-nnnvBFJW.js";import{A as F}from"./AuthenticatedLayout-DRcgFkbp.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */const H={props:["bookings","trips","passengers"],components:{AuthenticatedLayout:F,Link:k,Head:y},data(){return{form:h({id:"",trip_id:"",seat_number:"",user_id:"",active:!1,is_editing:!1}),delete_form:h({id:"",active:!1}),loading_button:!1,disabled_button:!1,is_confirmed:!1,is_canceled:!1,is_created:!1,search:"",routes:[{key:"Tabuk",value:"Tabuk"},{key:"Tuguegarao",value:"Tuguegarao"}],mode_of_payments:["Full","Installment"]}},mounted(){},computed:{filteredBookings(){return this.search?this.bookings.filter(l=>Object.values(l).some(t=>String(t).toLowerCase().includes(this.search.toLowerCase()))):this.bookings},computeAvailableSeat(){return this.form.trip_id!=""?this.trips.find(l=>l.id===this.form.trip_id).available_seats:""}},methods:{openForm(){this.form.active=!0,this.form.is_editing=!1},setTrip(l){this.form.trip_id=l},selectSeat(l){this.form.seat_number=l},closeForm(){this.form.id="",this.form.trip_id="",this.form.seat_number="",this.form.user_id="",this.form.active=!1,this.form.is_editing=!1},OpenDeleteForm(l){this.delete_form.id=l.id,this.delete_form.name=l.code,this.delete_form.active=!0},CloseDeleteForm(){this.delete_form.id="",this.delete_form.name="",this.delete_form.active=!1},accept(l){this.form.patch("/update_booking/accept/"+l,{onSuccess:()=>{this.is_confirmed=!0},onError:()=>{}})},cancelItem(l){this.form.patch("/update_booking/cancel/"+l,{onSuccess:()=>{this.is_canceled=!0},onError:()=>{}})},save(){this.form.post("/reservation/store",{onSuccess:()=>{this.closeForm(),this.is_created=!0},onError:()=>{}})}}},T={class:"py-1"},Z={class:"mx-auto sm:px-6 lg:px-8"},R={class:"overflow-hidden bg-white shadow-lg sm:rounded-lg"},D={class:"px-6 pb-6 overflow-x-auto bg-white shadow-md rounded-lg mt-0"},V={key:0,id:"alert-border-1",class:"flex items-center p-4 mb-4 text-teal-800 border-t-4 border-teal-300 bg-teal-50",role:"alert"},L={key:1,id:"alert-border-1",class:"flex items-center p-4 mb-4 text-indigo-800 border-t-4 border-indigo-300 bg-indigo-50",role:"alert"},N={key:2,id:"alert-border-1",class:"flex items-center p-4 mb-4 text-green-800 border-t-4 border-green-300 bg-green-50",role:"alert"},E={class:"mb-2 text-gray-900 flex flex-col md:flex-row md:justify-between md:items-center space-y-4 md:space-y-0"},P={class:"flex items-center space-x-2 w-full md:w-auto"},z={class:"min-w-full border border-gray-200"},I={class:"px-4 py-2"},O={class:"px-4 py-2"},U={class:"px-4 py-2"},Y={class:"px-4 py-2"},q={class:"px-4 py-2"},G={class:"px-4 py-2"},J={class:"px-4 py-2"},K={class:"px-4 py-2"},Q={class:"px-4 py-2 flex space-x-2"},W=["onClick"],X=["onClick"],$={key:0,id:"default-modal",tabindex:"-1","aria-hidden":"true",class:"fixed top-0 right-0 left-0 z-50 flex justify-center items-center w-full h-full bg-black bg-opacity-50"},ee={class:"relative p-4 w-full max-w-5xl max-h-full"},te={class:"relative bg-white rounded-lg shadow-sm"},re={class:"flex items-center justify-between p-4 md:p-5 border-b rounded-t border-gray-200"},se={class:"text-xl font-semibold text-gray-900"},oe={class:"p-4 md:p-5 space-y-4"},le=["value"],ne={class:"flex flex-col md:flex-row gap-4"},ie={class:"w-full"},de={class:"w-full text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white max-h-60 overflow-y-auto"},ae=["onClick"],ue={class:"w-full"},ge={class:"w-full text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white max-h-60 overflow-y-auto"},ce=["onClick"],fe={class:"flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b"};function me(l,t,m,pe,o,i){const w=p("Head"),v=p("AuthenticatedLayout");return n(),_(v,null,{default:C(()=>[M(w,{title:"Reservations"}),e("div",T,[e("div",Z,[e("div",R,[t[23]||(t[23]=e("div",{class:"p-6 mb-5 text-gray-900 flex flex-col md:flex-row md:justify-between md:items-center space-y-4 md:space-y-0 border-b border-gray-300 shadow"},[e("h3",{class:"text-2xl font-bold"},"Reservations")],-1)),e("div",D,[o.is_canceled?(n(),d("div",V,[t[10]||(t[10]=e("svg",{class:"shrink-0 w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),t[11]||(t[11]=e("div",{class:"ms-3 text-sm font-medium"}," Reservation Canceled ",-1)),e("button",{onClick:t[0]||(t[0]=r=>o.is_canceled=!1),type:"button",class:"ms-auto -mx-1.5 -my-1.5 bg-teal-50 text-teal-500 rounded-lg focus:ring-2 focus:ring-teal-400 p-1.5 hover:bg-teal-200 inline-flex items-center justify-center h-8 w-8","data-dismiss-target":"#alert-border-1","aria-label":"Close"},t[9]||(t[9]=[e("span",{class:"sr-only"},"Dismiss",-1),e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1)]))])):u("",!0),o.is_confirmed?(n(),d("div",L,[t[13]||(t[13]=e("svg",{class:"shrink-0 w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),t[14]||(t[14]=e("div",{class:"ms-3 text-sm font-medium"}," Reservation Confirmed ",-1)),e("button",{onClick:t[1]||(t[1]=r=>o.is_confirmed=!1),type:"button",class:"ms-auto -mx-1.5 -my-1.5 bg-indigo-50 text-indigo-500 rounded-lg focus:ring-2 focus:ring-indigo-400 p-1.5 hover:bg-indigo-200 inline-flex items-center justify-center h-8 w-8","data-dismiss-target":"#alert-border-1","aria-label":"Close"},t[12]||(t[12]=[e("span",{class:"sr-only"},"Dismiss",-1),e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1)]))])):u("",!0),o.is_created?(n(),d("div",N,[t[16]||(t[16]=e("svg",{class:"shrink-0 w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),t[17]||(t[17]=e("div",{class:"ms-3 text-sm font-medium"}," Reservation Created Successfully. ",-1)),e("button",{onClick:t[2]||(t[2]=r=>o.is_created=!1),type:"button",class:"ms-auto -mx-1.5 -my-1.5 bg-green-50 text-green-500 rounded-lg focus:ring-2 focus:ring-green-400 p-1.5 hover:bg-green-200 inline-flex items-center justify-center h-8 w-8","data-dismiss-target":"#alert-border-1","aria-label":"Close"},t[15]||(t[15]=[e("span",{class:"sr-only"},"Dismiss",-1),e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1)]))])):u("",!0),e("div",E,[e("button",{onClick:t[3]||(t[3]=(...r)=>i.openForm&&i.openForm(...r)),class:"px-4 py-2 mb-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center space-x-2"},t[18]||(t[18]=[e("svg",{class:"w-6 h-6 text-white-800","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 12h14m-7 7V5"})],-1),e("span",null,"New Reservation",-1)])),e("div",P,[b(e("input",{type:"text",placeholder:"Search...","onUpdate:modelValue":t[4]||(t[4]=r=>o.search=r),class:"px-4 py-2 border rounded-lg w-full md:w-auto focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[S,o.search]]),t[19]||(t[19]=e("button",{class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2"},[e("svg",{class:"w-6 h-6","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-width":"2",d:"m21 21-3.5-3.5M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z"})]),e("span",null,"Search")],-1))])]),e("table",z,[t[22]||(t[22]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-gray-700 border-b"},"#"),e("th",{class:"px-4 py-2 text-left text-gray-700 border-b"},"Trip"),e("th",{class:"px-4 py-2 text-left text-gray-700 border-b"},"Passennger"),e("th",{class:"px-4 py-2 text-left text-gray-700 border-b"},"Route"),e("th",{class:"px-4 py-2 text-left text-gray-700 border-b"},"Vehicle"),e("th",{class:"px-4 py-2 text-left text-gray-700 border-b"},"Seat Number "),e("th",{class:"px-4 py-2 text-left text-gray-700 border-b"},"Travel Date"),e("th",{class:"px-4 py-2 text-left text-gray-700 border-b"},"Status"),e("th",{class:"px-4 py-2 text-left text-gray-700 border-b"},"Actions")])],-1)),e("tbody",null,[(n(!0),d(g,null,c(i.filteredBookings,(r,a)=>(n(),d("tr",{class:"border-b",key:a},[e("td",I,s(a+1),1),e("td",O,s(r.trip!=null?r.trip.trip_code:""),1),e("td",U,s(r.user!=null?r.user.name:""),1),e("td",Y,s(r.trip!=null?r.trip.origin:"")+" -> "+s(r.trip!=null?r.trip.destination:""),1),e("td",q,s(r.trip!=null&&r.trip.vehicle!=null?r.trip.vehicle.plate_number:""),1),e("td",G,s(r.seat_number),1),e("td",J,s(r.trip!=null?r.trip.departure_date_v:"")+" | "+s(r.trip!=null?r.trip.departure_time_v:""),1),e("td",K,s(r.status),1),e("td",Q,[r.status=="pending"?(n(),d("button",{key:0,type:"button",onClick:f=>i.accept(r.id),class:"px-1 py-1 text-white bg-green-700 hover:bg-green-800 focus:ring-2 focus:outline-none focus:ring-green-300 font-medium rounded-full text-sm p-2 text-center inline-flex items-center me-2 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800"},t[20]||(t[20]=[e("svg",{class:"w-5 h-5 text-white-800 dark:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 11.917 9.724 16.5 19 7.5"})],-1)]),8,W)):u("",!0),r.status=="pending"?(n(),d("button",{key:1,type:"button",onClick:f=>i.cancelItem(r.id),class:"px-1 py-1 text-white bg-red-700 hover:bg-red-800 focus:ring-2 focus:outline-none focus:ring-red-300 font-medium rounded-full text-sm p-2 text-center inline-flex items-center me-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-800"},t[21]||(t[21]=[e("svg",{class:"w-5 h-5 text-white-800 dark:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18 17.94 6M18 18 6.06 6"})],-1)]),8,X)):u("",!0)])]))),128))])])])])])]),o.form.active?(n(),d("div",$,[e("div",ee,[e("div",te,[e("div",re,[e("h3",se,s(o.form.is_editing?"Edit":"Create")+" Reservation ",1),e("button",{onClick:t[5]||(t[5]=(...r)=>i.closeForm&&i.closeForm(...r)),type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center","data-modal-hide":"default-modal"},t[24]||(t[24]=[e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),e("span",{class:"sr-only"},"Close modal",-1)]))]),e("div",oe,[e("div",null,[t[25]||(t[25]=e("label",{for:"user",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Passenger: ",-1)),b(e("select",{"onUpdate:modelValue":t[6]||(t[6]=r=>o.form.user_id=r),id:"user",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},[(n(!0),d(g,null,c(m.passengers,(r,a)=>(n(),d("option",{key:a,value:r.id},s(r.name),9,le))),128))],512),[[j,o.form.user_id]])]),e("div",ne,[e("div",ie,[t[30]||(t[30]=e("label",{for:"countries",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Select Your cycle",-1)),e("ul",de,[(n(!0),d(g,null,c(m.trips,(r,a)=>(n(),d("li",{key:a,onClick:f=>i.setTrip(r.id),class:x([{"bg-blue-500 text-white":o.form.trip_id===r.id,"hover:bg-gray-100 hover:text-blue-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:text-blue-500":o.form.trip_id!==r.id},"w-full px-4 py-2 border-b border-gray-200 rounded-t-lg cursor-pointer"])},[e("span",null,s(r.trip_code),1),t[26]||(t[26]=B()),t[27]||(t[27]=e("br",null,null,-1)),e("span",null,s(r.origin)+" - "+s(r.destination),1),t[28]||(t[28]=e("br",null,null,-1)),e("span",null,s(r.departure_date)+" - "+s(r.departure_time_v),1),t[29]||(t[29]=e("br",null,null,-1)),e("span",null,s(r.driver!=null?r.driver.full_name:""),1)],10,ae))),128))])]),e("div",ue,[t[31]||(t[31]=e("label",{for:"countries",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Select Your Seat",-1)),e("ul",ge,[(n(!0),d(g,null,c(i.computeAvailableSeat,(r,a)=>(n(),d("li",{key:a,onClick:f=>i.selectSeat(r),class:x([{"bg-blue-500 text-white":o.form.seat_number===r,"hover:bg-gray-100 hover:text-blue-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:text-blue-500":o.form.seat_number!==r},"w-full px-4 py-2 border-b border-gray-200 rounded-t-lg cursor-pointer"])},[e("span",null,s(r),1)],10,ce))),128))])])])]),e("div",fe,[e("button",{onClick:t[7]||(t[7]=(...r)=>i.save&&i.save(...r)),"data-modal-hide":"default-modal",type:"button",class:"text-white bg-green-700 hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center"},"Create"),e("button",{onClick:t[8]||(t[8]=(...r)=>i.closeForm&&i.closeForm(...r)),"data-modal-hide":"default-modal",type:"button",class:"py-2.5 px-5 ms-3 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100"},"Cancel")])])])])):u("",!0)]),_:1})}const ve=A(H,[["render",me]]);export{ve as default};
